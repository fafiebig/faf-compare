jQuery(document).ready(function () {    jQuery("#faf-compare-short").click(function(){        if (this.window === undefined) {            this.window = wp.media({                title: 'Select images',                library: {type: 'image'},                multiple: 'add',                button: {text: 'Select'}            });            // take this over to anonymus            var self = this;            this.window.on('select', function () {                var attachments = self.window.state().get('selection').toJSON();                var before      = attachments[0];                var after       = attachments[1];                if (before === undefined || after === undefined) {                    alert('Select 2 images to compare!');                    return false;                }                wp.media.editor.insert('[compare before="' + before.id + '" after="' + after.id + '" size="medium"]');            });        }        this.window.open();        return false;    });});